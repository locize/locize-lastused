!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).locizeLastUsed=e()}(function(){return function o(i,r,s){function c(t,e){if(!r[t]){if(!i[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(u)return u(t,!0);throw(e=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",e}n=r[t]={exports:{}},i[t][0].call(n.exports,function(e){return c(i[t][1][e]||e)},n,n.exports,o,i,r,s)}return r[t].exports}for(var u="function"==typeof require&&require,e=0;e<s.length;e++)c(s[e]);return c}({1:[function(n,o,i){!function(t){!function(){var e;"function"==typeof fetch&&(e=void 0!==t&&t.fetch?t.fetch:"undefined"!=typeof window&&window.fetch?window.fetch:fetch),void 0===n||"undefined"!=typeof window&&void 0!==window.document||((e=e||n("cross-fetch")).default&&(e=e.default),i.default=e,o.exports=i.default)}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"cross-fetch":5}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("./utils.js"),s=(e=e("./request.js"))&&e.__esModule?e:{default:e};function o(){return{lastUsedPath:"https://api.locize.app/used/{{projectId}}/{{version}}/{{lng}}/{{ns}}",referenceLng:"en",crossDomain:!0,setContentTypeJSON:!1,version:"latest",debounceSubmit:9e4,allowedHosts:["localhost"]}}e={init:function(e){var t=e.t&&"function"==typeof e.t,n=(t&&!e.options.locizeLastUsed.projectId&&e.options.backend.projectId&&(e.options.locizeLastUsed.projectId=e.options.backend.projectId),t&&!e.options.locizeLastUsed.version&&e.options.backend.version&&(e.options.locizeLastUsed.version=e.options.backend.version),t&&!e.options.locizeLastUsed.apiKey&&e.options.backend.apiKey&&(e.options.locizeLastUsed.apiKey=e.options.backend.apiKey),t&&!e.options.locizeLastUsed.referenceLng&&e.options.backend.referenceLng&&(e.options.locizeLastUsed.referenceLng=e.options.backend.referenceLng),t&&!e.options.locizeLastUsed.referenceLng&&e.options.fallbackLng&&Array.isArray(e.options.fallbackLng)&&"dev"!==e.options.fallbackLng[0]&&(e.options.locizeLastUsed.referenceLng=e.options.fallbackLng[0]),this.options=t?(0,r.defaults)(e.options.locizeLastUsed,this.options||{},o()):(0,r.defaults)(e,this.options||{},o()),"undefined"!=typeof window&&window.location&&window.location.hostname);this.isAllowed=!n||-1<this.options.allowedHosts.indexOf(n),this.submitting=null,this.pending={},this.done={},this.submit=(0,r.debounce)(this.submit,this.options.debounceSubmit),t&&this.interceptI18next(e)},interceptI18next:function(i){var r=this,s=i.services.resourceStore.getResource;i.services.resourceStore.getResource=function(e,t,n,o){return n&&r.used(t,n),s.call(i.services.resourceStore,e,t,n,o)}},used:function(t,n,e){var o=this;["pending","done"].forEach(function(e){o.done[t]&&o.done[t][n]||(o[e][t]||(o[e][t]={}),o[e][t][n]=!0)}),this.submit(e)},submit:function(t){var n=this;if(!this.isAllowed)return t&&t(new Error("not allowed"));if(this.submitting)return this.submit(t);var e=(0,r.isMissingOption)(this.options,["projectId","version","apiKey","referenceLng"]);if(e)return t&&t(new Error(e));this.submitting=this.pending,this.pending={};function o(e){--i||(n.submitting=null,t&&t(e))}var e=Object.keys(this.submitting),i=e.length;e.forEach(function(e){var t=Object.keys(n.submitting[e]),e=(0,r.replaceIn)(n.options.lastUsedPath,["projectId","version","lng","ns"],(0,r.defaults)({lng:n.options.referenceLng,ns:e},n.options));t.length?(0,s.default)((0,r.defaults)({authorize:!0},n.options),e,t,o):o()})},type:"3rdParty"};n.default=e;t.exports=n.default},{"./request.js":3,"./utils.js":4}],3:[function(n,o,i){!function(r,t){!function(){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s,c,u,e=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};t=f(t);if(t&&t.has(e))return t.get(e);var n,o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var r;"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&((r=i?Object.getOwnPropertyDescriptor(e,n):null)&&(r.get||r.set)?Object.defineProperty(o,n,r):o[n]=e[n])}return o.default=e,t&&t.set(e,o),o}(n("./getFetch.js"));function f(e){var t,n;return"function"!=typeof WeakMap?null:(t=new WeakMap,n=new WeakMap,(f=function(e){return e?n:t})(e))}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}"function"==typeof fetch&&(s=void 0!==t&&t.fetch?t.fetch:"undefined"!=typeof window&&window.fetch?window.fetch:fetch),"function"!=typeof XMLHttpRequest&&"object"!==("undefined"==typeof XMLHttpRequest?"undefined":a(XMLHttpRequest))||(void 0!==t&&t.XMLHttpRequest?c=t.XMLHttpRequest:"undefined"!=typeof window&&window.XMLHttpRequest&&(c=window.XMLHttpRequest)),"function"==typeof ActiveXObject&&(void 0!==t&&t.ActiveXObject?u=t.ActiveXObject:"undefined"!=typeof window&&window.ActiveXObject&&(u=window.ActiveXObject)),"function"!=typeof(s=s||!e||c||u?s:e.default||e)&&(s=void 0);function d(e,t,n,o){function i(t){var n=t.headers&&"Error from cloudfront"===t.headers.get("x-cache");if(!t.ok)return o(t.statusText||"Error",{status:t.status,resourceNotExisting:n});t.text().then(function(e){o(null,{status:t.status,data:e,resourceNotExisting:n})}).catch(o)}e={Authorization:e.authorize&&e.apiKey?e.apiKey:void 0,"Content-Type":"application/json"},"undefined"==typeof window&&void 0!==r&&r.versions&&r.versions.node&&(e["User-Agent"]="locize-lastused (node/".concat(r.version,"; ").concat(r.platform," ").concat(r.arch,")")),("function"==typeof fetch?fetch:s)(t,{method:n?"POST":"GET",body:n?JSON.stringify(n):void 0,headers:e}).then(i).catch(o)}i.default=function(e,t,n,o){if("function"==typeof n&&(o=n,n=void 0),o=o||function(){},s)return d(e,t,n,o);if("function"==typeof XMLHttpRequest||"object"===("undefined"==typeof XMLHttpRequest?"undefined":a(XMLHttpRequest))||"function"==typeof ActiveXObject){var i=o;try{var r=c?new c:new u("MSXML2.XMLHTTP.3.0");r.open(n?"POST":"GET",t,1),e.crossDomain||r.setRequestHeader("X-Requested-With","XMLHttpRequest"),e.authorize&&e.apiKey&&r.setRequestHeader("Authorization",e.apiKey),(n||e.setContentTypeJSON)&&r.setRequestHeader("Content-Type","application/json"),r.onreadystatechange=function(){var e="Error from cloudfront"===r.getResponseHeader("x-cache");3<r.readyState&&i(400<=r.status?r.statusText:null,{status:r.status,data:r.responseText,resourceNotExisting:e})},r.send(JSON.stringify(n))}catch(e){console&&console.log(e)}}else o(new Error("No fetch and no xhr implementation found!"))};o.exports=i.default}.call(this)}.call(this,n("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./getFetch.js":1,_process:6}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.debounce=function(o,i,r){var s;return function(){var e=this,t=arguments,n=r&&!s;clearTimeout(s),s=setTimeout(function(){s=null,r||o.apply(e,t)},i),n&&o.apply(e,t)}},n.defaults=function(n){return o.call(i.call(arguments,1),function(e){if(e)for(var t in e)void 0===n[t]&&(n[t]=e[t])}),n},n.isMissingOption=function(n,e){return e.reduce(function(e,t){return e||(!n||!n[t]||"string"!=typeof n[t]||!n[t].toLowerCase()===t.toLowerCase())&&(e='i18next-lastused :: got "'.concat(n[t],'" in options for ').concat(t," which is invalid."),console.warn(e),e)},!1)},n.replaceIn=function(e,t,n){var o=e;return t.forEach(function(e){var t=new RegExp("{{".concat(e,"}}"),"g");o=o.replace(t,n[e])}),o};var n=[],o=n.forEach,i=n.slice},{}],5:[function(e,t,n){},{}],6:[function(e,t,n){var o,i,t=t.exports={};function r(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}try{o="function"==typeof setTimeout?setTimeout:r}catch(e){o=r}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(e){i=s}function c(t){if(o===setTimeout)return setTimeout(t,0);if((o===r||!o)&&setTimeout)return(o=setTimeout)(t,0);try{return o(t,0)}catch(e){try{return o.call(null,t,0)}catch(e){return o.call(this,t,0)}}}var u,f=[],a=!1,d=-1;function l(){a&&u&&(a=!1,u.length?f=u.concat(f):d=-1,f.length)&&p()}function p(){if(!a){for(var e=c(l),t=(a=!0,f.length);t;){for(u=f,f=[];++d<t;)u&&u[d].run();d=-1,t=f.length}u=null,a=!1,!function(t){if(i===clearTimeout)return clearTimeout(t);if((i===s||!i)&&clearTimeout)return(i=clearTimeout)(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function y(){}t.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];f.push(new h(e,t)),1!==f.length||a||c(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={},t.on=y,t.addListener=y,t.once=y,t.off=y,t.removeListener=y,t.removeAllListeners=y,t.emit=y,t.prependListener=y,t.prependOnceListener=y,t.listeners=function(e){return[]},t.binding=function(e){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(e){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},{}]},{},[2])(2)});