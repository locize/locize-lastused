!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).locizeLastUsed=e()}(function(){return function r(s,u,f){function c(t,e){if(!u[t]){if(!s[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(a)return a(t,!0);var o=new Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}var i=u[t]={exports:{}};s[t][0].call(i.exports,function(e){return c(s[t][1][e]||e)},i,i.exports,r,s,u,f)}return u[t].exports}for(var a="function"==typeof require&&require,e=0;e<f.length;e++)c(f[e]);return c}({1:[function(o,i,r){(function(e){var t,n;"function"==typeof fetch&&(void 0!==e&&e.fetch?t=e.fetch:"undefined"!=typeof window&&window.fetch&&(t=window.fetch)),void 0!==o&&((n=t||o("node-fetch")).default&&(n=n.default),r.default=n,i.exports=r.default)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"node-fetch":5}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o,s=e("./utils.js"),u=(o=e("./request.js"))&&o.__esModule?o:{default:o};function i(){return{lastUsedPath:"https://api.locize.app/used/{{projectId}}/{{version}}/{{lng}}/{{ns}}",referenceLng:"en",crossDomain:!0,setContentTypeJSON:!1,version:"latest",debounceSubmit:9e4,allowedHosts:["localhost"]}}var r={init:function(e){var t=e.t&&"function"==typeof e.t;this.options=t?(0,s.defaults)(e.options.locizeLastUsed,this.options||{},i()):(0,s.defaults)(e,this.options||{},i());var n="undefined"!=typeof window&&window.location&&window.location.hostname;this.isAllowed=!n||-1<this.options.allowedHosts.indexOf(n),this.submitting=null,this.pending={},this.done={},this.submit=(0,s.debounce)(this.submit,this.options.debounceSubmit),t&&this.interceptI18next(e)},interceptI18next:function(i){var r=this,s=i.services.resourceStore.getResource;i.services.resourceStore.getResource=function(e,t,n,o){return n&&r.used(t,n),s.call(i.services.resourceStore,e,t,n,o)}},used:function(t,n,e){var o=this;["pending","done"].forEach(function(e){o.done[t]&&o.done[t][n]||(o[e][t]||(o[e][t]={}),o[e][t][n]=!0)}),this.submit(e)},submit:function(t){var o=this;if(!this.isAllowed)return t&&t(new Error("not allowed"));if(this.submitting)return this.submit(t);var e=(0,s.isMissingOption)(this.options,["projectId","version","apiKey","referenceLng"]);if(e)return t&&t(new Error(e));this.submitting=this.pending,this.pending={};function i(e){--r||(o.submitting=null,t&&t(e))}var n=Object.keys(this.submitting),r=n.length;n.forEach(function(e){var t=Object.keys(o.submitting[e]),n=(0,s.replaceIn)(o.options.lastUsedPath,["projectId","version","lng","ns"],(0,s.defaults)({lng:o.options.referenceLng,ns:e},o.options));t.length?(0,u.default)((0,s.defaults)({authorize:!0},o.options),n,t,i):i()})},type:"3rdParty"};n.default=r,t.exports=n.default},{"./request.js":3,"./utils.js":4}],3:[function(o,i,r){(function(e){"use strict";function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var u,f,c,t=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==s(e)&&"function"!=typeof e)return{default:e};var t=a();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e){var r;Object.prototype.hasOwnProperty.call(e,i)&&((r=o?Object.getOwnPropertyDescriptor(e,i):null)&&(r.get||r.set)?Object.defineProperty(n,i,r):n[i]=e[i])}n.default=e,t&&t.set(e,n);return n}(o("./getFetch.js"));function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}"function"==typeof fetch&&(void 0!==e&&e.fetch?u=e.fetch:"undefined"!=typeof window&&window.fetch&&(u=window.fetch)),"function"==typeof XMLHttpRequest&&(void 0!==e&&e.XMLHttpRequest?f=e.XMLHttpRequest:"undefined"!=typeof window&&window.XMLHttpRequest&&(f=window.XMLHttpRequest)),"function"==typeof ActiveXObject&&(void 0!==e&&e.ActiveXObject?c=e.ActiveXObject:"undefined"!=typeof window&&window.ActiveXObject&&(c=window.ActiveXObject)),!u&&t&&(u=t.default||t),"function"!=typeof u&&(u=void 0);function n(e,t,n,o){return"function"==typeof n&&(o=n,n=void 0),o=o||function(){},u?(i=e,s=o,void u(t,{method:(r=n)?"POST":"GET",body:r?JSON.stringify(r):void 0,headers:{Authorization:i.authorize&&i.apiKey?i.apiKey:void 0,"Content-Type":"application/json"}}).then(function(t){var n=t.headers&&"Error from cloudfront"===t.headers.get("x-cache");if(!t.ok)return s(t.statusText||"Error",{status:t.status,resourceNotExisting:n});t.text().then(function(e){s(null,{status:t.status,data:e,resourceNotExisting:n})}).catch(s)}).catch(s)):"function"==typeof XMLHttpRequest||"function"==typeof ActiveXObject?function(e,t,n,o){try{var i=f?new f:new c("MSXML2.XMLHTTP.3.0");i.open(n?"POST":"GET",t,1),e.crossDomain||i.setRequestHeader("X-Requested-With","XMLHttpRequest"),e.authorize&&e.apiKey&&i.setRequestHeader("Authorization",e.apiKey),(n||e.setContentTypeJSON)&&i.setRequestHeader("Content-Type","application/json"),i.onreadystatechange=function(){var e="Error from cloudfront"===i.getResponseHeader("x-cache");3<i.readyState&&o(i.statusText,{status:i.status,data:i.responseText,resourceNotExisting:e})},i.send(JSON.stringify(n))}catch(e){console&&console.log(e)}}(e,t,n,o):void 0;var i,r,s}r.default=n,i.exports=r.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./getFetch.js":1}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.defaults=function(n){return i.call(r.call(arguments,1),function(e){if(e)for(var t in e)void 0===n[t]&&(n[t]=e[t])}),n},n.debounce=function(o,i,r){var s;return function(){var e=this,t=arguments,n=r&&!s;clearTimeout(s),s=setTimeout(function(){s=null,r||o.apply(e,t)},i),n&&o.apply(e,t)}},n.isMissingOption=function(o,e){return e.reduce(function(e,t){if(e)return e;if(o&&o[t]&&"string"==typeof o[t]&&!o[t].toLowerCase()!==t.toLowerCase())return!1;var n='i18next-lastused :: got "'.concat(o[t],'" in options for ').concat(t," which is invalid.");return console.warn(n),n},!1)},n.replaceIn=function(e,t,n){var o=e;return t.forEach(function(e){var t=new RegExp("{{".concat(e,"}}"),"g");o=o.replace(t,n[e])}),o};var o=[],i=o.forEach,r=o.slice},{}],5:[function(e,t,n){},{}]},{},[2])(2)});